<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>aegyoer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<script>
  const video = document.querySelector('.intro-video');

  if (video) {
    video.addEventListener('play', () => {
      document.body.classList.add('music-reactive');
    });

    video.addEventListener('pause', () => {
      document.body.classList.remove('music-reactive');
    });

    video.addEventListener('ended', () => {
      document.body.classList.remove('music-reactive');
    });
  }
</script>

<script>
const video = document.getElementById('rave-video');
let audioCtx, source, analyser;

function initAudio() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    source = audioCtx.createMediaElementSource(video);
    analyser = audioCtx.createAnalyser();
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 256;

    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function animate() {
      requestAnimationFrame(animate);
      analyser.getByteFrequencyData(dataArray);
      const bass = dataArray.slice(0, 20).reduce((a, b) => a + b, 0) / 20;
      if (bass > 80) {
        document.body.classList.add('rave-intensity');
      } else {
        document.body.classList.remove('rave-intensity');
      }
    }

    animate();
  }
}

video.addEventListener('play', () => {
  initAudio();
  if (audioCtx.state === 'suspended') {
    audioCtx.resume();
  }
});
</script>

<script>
  const video = document.getElementById('rave-video');

  let visualizerStarted = false;

  function startVisualizer() {
    if (visualizerStarted) return;
    visualizerStarted = true;

    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioContext.createMediaElementSource(video);
    const analyser = audioContext.createAnalyser();
    const bg = document.body;

    source.connect(analyser);
    analyser.connect(audioContext.destination);

    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function animate() {
      requestAnimationFrame(animate);
      analyser.getByteFrequencyData(dataArray);
      const average = dataArray.reduce((a, b) => a + b) / bufferLength;

      const r = Math.min(255, Math.floor(average * 2));
      const g = Math.min(255, 100 + Math.floor(average));
      const b = Math.min(255, 150 + Math.floor(average / 2));

      bg.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
    }

    animate();
  }

  video.addEventListener('play', () => {
    if (!video.muted) {
      startVisualizer();
    }
  });

  video.addEventListener('volumechange', () => {
    if (!video.muted && !video.paused) {
      startVisualizer();
    }
  });

  window.addEventListener('scroll', () => {
    if (window.scrollY > 10) {
      document.body.classList.add('scrolled');
    } else {
      document.body.classList.remove('scrolled');
    }
  });
</script>

<script>
const video = document.getElementById('rave-video');
let audioCtx, source, analyser;

function initAudio() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    source = audioCtx.createMediaElementSource(video);
    analyser = audioCtx.createAnalyser();
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 256;

    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function animate() {
      requestAnimationFrame(animate);
      analyser.getByteFrequencyData(dataArray);
      const bass = dataArray.slice(0, 20).reduce((a, b) => a + b, 0) / 20;
      if (bass > 20) {
        document.body.classList.add('rave-intensity');
      } else {
        document.body.classList.remove('rave-intensity');
      }
    }

    animate();
  }
}

video.addEventListener('play', () => {
  initAudio();
  if (audioCtx.state === 'suspended') {
    audioCtx.resume();
  }
});
</script>


  
<body>
  <header>
    <div class="username-wrapper">
      <h1 class="main-name">aegyoer</h1>
      <h2 class="aka-name">aka rar</h2>
      <p class="brand-desc">
        i make weird edits, videos, zines, and archives — click around and find what u weren’t looking for.
      </p>
    </div>
    <nav class="nav-links">
      <a href="tools.html">tools</a>
      <a href="exo.html">exo</a>
      <a href="nct.html">nct</a>
      <a href="shinee.html">shinee</a>
      <a href="tvxq.html">tvxq</a>
      <a href="superjunior.html">super junior</a>
      <a href="zine.html">zine</a>
      <a href="edits.html">edits</a>
    </nav>
  </header>

  <main>
    <!-- main content can go here later -->
  </main>

  <script>
    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        document.body.classList.add('scrolled');
      } else {
        document.body.classList.remove('scrolled');
      }
    });
  </script>
</body>

</html>
