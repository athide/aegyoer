<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>aegyoer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<script>
  const video = document.querySelector('.intro-video');

  if (video) {
    video.addEventListener('play', () => {
      document.body.classList.add('music-reactive');
    });

    video.addEventListener('pause', () => {
      document.body.classList.remove('music-reactive');
    });

    video.addEventListener('ended', () => {
      document.body.classList.remove('music-reactive');
    });
  }
</script>

<script>
const video = document.getElementById('rave-video');
let audioCtx, source, analyser, dataArray, rafId;

function setupAudioAnalysis() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  source = audioCtx.createMediaElementSource(video);
  analyser = audioCtx.createAnalyser();
  analyser.fftSize = 256;
  source.connect(analyser);
  analyser.connect(audioCtx.destination);
  dataArray = new Uint8Array(analyser.frequencyBinCount);
}

function animateRave() {
  analyser.getByteFrequencyData(dataArray);

  let bass = dataArray.slice(0, 10).reduce((a, b) => a + b, 0) / 10;
  let mids = dataArray.slice(10, 40).reduce((a, b) => a + b, 0) / 30;
  let highs = dataArray.slice(40, 80).reduce((a, b) => a + b, 0) / 40;

  document.body.style.background = `radial-gradient(
    circle at 20% 30%, 
    rgba(255, ${50 + bass}, ${150 + highs}, 0.6), 
    rgba(${100 + mids}, ${40 + highs}, 255, 0.4)
  )`;

  rafId = requestAnimationFrame(animateRave);
}

function startRave() {
  if (!audioCtx) setupAudioAnalysis();
  audioCtx.resume();
  animateRave();
}

function stopRave() {
  cancelAnimationFrame(rafId);
  document.body.style.transition = 'background 2s ease';
  document.body.style.background = '#fde6f0'; // your soft pink default
}

video.addEventListener('play', startRave);
video.addEventListener('pause', stopRave);
video.addEventListener('ended', stopRave);
</script>

<script>
  const video = document.getElementById('rave-video');

  let visualizerStarted = false;

  function startVisualizer() {
    if (visualizerStarted) return;
    visualizerStarted = true;

    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioContext.createMediaElementSource(video);
    const analyser = audioContext.createAnalyser();
    const bg = document.body;

    source.connect(analyser);
    analyser.connect(audioContext.destination);

    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function animate() {
      requestAnimationFrame(animate);
      analyser.getByteFrequencyData(dataArray);
      const average = dataArray.reduce((a, b) => a + b) / bufferLength;

      const r = Math.min(255, Math.floor(average * 2));
      const g = Math.min(255, 100 + Math.floor(average));
      const b = Math.min(255, 150 + Math.floor(average / 2));

      bg.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
    }

    animate();
  }

  video.addEventListener('play', () => {
    if (!video.muted) {
      startVisualizer();
    }
  });

  video.addEventListener('volumechange', () => {
    if (!video.muted && !video.paused) {
      startVisualizer();
    }
  });

  window.addEventListener('scroll', () => {
    if (window.scrollY > 10) {
      document.body.classList.add('scrolled');
    } else {
      document.body.classList.remove('scrolled');
    }
  });
</script>

  
<body>
  <div class="hero">
    <div class="homepage-container">
      
      <!-- LEFT SIDE: MEDIA / TEXT -->
      <div class="left-side">
        <h1 class="main-name">aegyoer</h1>
        <h2 class="aka-name">aka rar</h2>
        <p class="intro-text">i make weird edits + audio collages and pretend im real</p>
      </div>

      <div class="left-column">
<video id="rave-video" src="homepagevideo.mp4" autoplay loop playsinline controls></video>
</div>


      <!-- RIGHT SIDE: PAGE LINKS -->
      <div class="right-side">
        <div class="link-box">
          <a href="superjunior.html">ğŸ’¿ super junior dump</a>
          <a href="exo.html">ğŸ©° exo shrine</a>
          <a href="nct.html">ğŸ’š nct loops</a>
          <a href="tools.html">ğŸ› ï¸ tools</a>
          <a href="zine.html">ğŸ““ zine</a>
          <a href="about.html">ğŸ’Œ about</a>
        </div>
      </div>

    </div>
  </div>
</body>
</html>
